<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 자동 갱신 로또번호 생성기</title>
    <script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4166816153257661"
        crossOrigin="anonymous" async></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Arial', sans-serif; }
        body { background-color: #f5f5f5; min-height: 100vh; padding: 20px; }
        
        .page-container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }
        
        @media (min-width: 1024px) {
            .page-container {
                grid-template-columns: 160px 1fr 160px;
            }
        }
        
        .main-container {
            display: flex;
            justify-content: center;
        }
        
        .container { 
            background-color: white; 
            border-radius: 10px; 
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); 
            width: 100%; 
            max-width: 500px; 
            padding: 30px; 
            text-align: center; 
        }
        
        h1 { color: #333; margin-bottom: 20px; }
        .today-date { font-size: 18px; color: #666; margin-bottom: 15px; }
        .next-update { font-size: 14px; color: #888; margin-bottom: 25px; }
        .numbers-container { display: flex; justify-content: center; flex-wrap: wrap; gap: 15px; margin: 30px 0; }
        .number { width: 50px; height: 50px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 20px; font-weight: bold; color: white; transition: transform 0.3s ease; }
        .number:hover { transform: scale(1.1); }
        .history { margin-top: 30px; text-align: left; max-height: 200px; overflow-y: auto; border-top: 1px solid #eee; padding-top: 15px; }
        .history-item { padding: 8px 0; border-bottom: 1px solid #f0f0f0; }
        .history-numbers { display: flex; gap: 5px; margin-top: 5px; }
        .history-number { width: 25px; height: 25px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 12px; color: white; }
        .num-1-10 { background-color: #FFB300; }
        .num-11-20 { background-color: #29B6F6; }
        .num-21-30 { background-color: #EF5350; }
        .num-31-40 { background-color: #66BB6A; }
        .num-41-45 { background-color: #AB47BC; }
        
        .ad-container {
            width: 100%;
            margin: 20px auto;
            text-align: center;
            overflow: hidden;
        }
        
        .ad-sidebar {
            position: sticky;
            top: 20px;
        }
        
        .ad-bottom {
            width: 100%;
            max-width: 728px;
            margin: 20px auto;
        }
        
        @media (max-width: 1023px) {
            .left-sidebar, .right-sidebar {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="page-container">
        <div class="left-sidebar">
            <div class="ad-sidebar">
                <!-- 좌측 배너 광고 -->
                <ins class="adsbygoogle"
                    style="display:block"
                    data-ad-client="ca-pub-4166816153257661"
                    data-ad-slot="9411216466"
                    data-ad-format="auto"
                    data-full-width-responsive="true"></ins>
                <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
        </div>
        
        <div class="main-container">
            <div class="container">
                <h1>이번주 AI 로또번호</h1>
                <div class="today-date" id="todayDate"></div>
                <div class="next-update" id="nextUpdate"></div>
                <div class="numbers-container" id="numbers"></div>
                <div class="history" id="history">
                    <h3>이전 번호 기록</h3>
                </div>
            </div>
        </div>
        
        <div class="right-sidebar">
            <div class="ad-sidebar">
                <!-- 우측 배너 광고 -->
                <ins class="adsbygoogle"
                    style="display:block"
                    data-ad-client="ca-pub-4166816153257661"
                    data-ad-slot="9411216466"
                    data-ad-format="auto"
                    data-full-width-responsive="true"></ins>
                <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
        </div>
    </div>
    
    <!-- 하단 광고 -->
    <div class="ad-bottom">
        <ins class="adsbygoogle"
            style="display:block"
            data-ad-client="ca-pub-4166816153257661"
            data-ad-slot="9411216466"
            data-ad-format="auto"
            data-full-width-responsive="true"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const numbersContainer = document.getElementById('numbers');
            const historyContainer = document.getElementById('history');
            const todayDateElement = document.getElementById('todayDate');
            const nextUpdateElement = document.getElementById('nextUpdate');

            let history = JSON.parse(localStorage.getItem('lottoHistory')) || [];

            function getSundayWeekKey() {
                const now = new Date();
                const sunday = new Date(now);
                const day = now.getDay();
                if (day !== 0) {
                    sunday.setDate(now.getDate() + (7 - day));
                }
                const year = sunday.getFullYear();
                const month = (sunday.getMonth() + 1).toString().padStart(2, '0');
                const date = sunday.getDate().toString().padStart(2, '0');
                return `${year}-${month}-${date}`;
            }

            function getNextUpdateTime() {
                const now = new Date();
                const next = new Date(now);
                const day = now.getDay();
                const daysUntilNextSunday = (7 - day) % 7 || 7;
                next.setDate(now.getDate() + daysUntilNextSunday);
                next.setHours(0, 0, 0, 0);
                return next;
            }

            function updateNextUpdateText() {
                const now = new Date();
                const nextUpdate = getNextUpdateTime();
                const diff = nextUpdate - now;
                const hours = Math.floor(diff / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);

                nextUpdateElement.textContent = `다음 번호 갱신까지: ${hours}시간 ${minutes}분 ${seconds}초`;
                setTimeout(updateNextUpdateText, 1000);
                if (diff <= 1000) location.reload();
            }

            function showTodayDate() {
                const now = new Date();
                const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
                todayDateElement.textContent = now.toLocaleDateString('ko-KR', options);
            }

            function generateNumbers() {
                const numbers = Array.from({ length: 45 }, (_, i) => i + 1);
                let selectedNumbers = [];
                for (let i = 0; i < 6; i++) {
                    const randomIndex = Math.floor(Math.random() * numbers.length);
                    selectedNumbers.push(numbers[randomIndex]);
                    numbers.splice(randomIndex, 1);
                }
                return selectedNumbers.sort((a, b) => a - b);
            }

            function displayNumbers(numbers) {
                numbersContainer.innerHTML = '';
                numbers.forEach(number => {
                    const numberDiv = document.createElement('div');
                    numberDiv.className = `number ${getColorClass(number)}`;
                    numberDiv.textContent = number;
                    numbersContainer.appendChild(numberDiv);
                });
            }

            function addToHistory(numbers) {
                const now = new Date();
                const dateKey = getSundayWeekKey();
                const timeString = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
                const existingIndex = history.findIndex(item => item.date === dateKey);
                if (existingIndex !== -1) {
                    return history[existingIndex].numbers;
                } else {
                    history.unshift({ date: dateKey, time: timeString, numbers: numbers });
                    if (history.length > 30) history.pop();
                    localStorage.setItem('lottoHistory', JSON.stringify(history));
                    return numbers;
                }
            }
            
            function renderHistory() {
                const historyTitle = '<h3>이전 번호 기록</h3>';
                if (history.length === 0) {
                    historyContainer.innerHTML = historyTitle + '<p>아직 기록이 없습니다.</p>';
                    return;
                }

                const currentWeekKey = getSundayWeekKey();
                const filteredHistory = history.filter(item => item.date !== currentWeekKey);

                if (filteredHistory.length === 0) {
                    historyContainer.innerHTML = historyTitle + '<p>아직 이전 기록이 없습니다.</p>';
                    return;
                }

                const sortedHistory = [...filteredHistory].sort((a, b) => b.date.localeCompare(a.date));

                let historyHTML = historyTitle;
                sortedHistory.forEach(item => {
                    historyHTML += `
                        <div class="history-item">
                            <div>${item.date}</div>
                            <div class="history-numbers">
                                ${item.numbers.map(num => `<div class="history-number ${getColorClass(num)}">${num}</div>`).join('')}
                            </div>
                        </div>
                    `;
                });

                historyContainer.innerHTML = historyHTML;
            }


            function getColorClass(number) {
                if (number <= 10) return 'num-1-10';
                if (number <= 20) return 'num-11-20';
                if (number <= 30) return 'num-21-30';
                if (number <= 40) return 'num-31-40';
                return 'num-41-45';
            }

            function initializeWeeklyNumbers() {
                const weekKey = getSundayWeekKey();
                let numbers;
                const existing = history.find(item => item.date === weekKey);
                if (existing) {
                    numbers = existing.numbers;
                } else {
                    const newNumbers = generateNumbers();
                    numbers = addToHistory(newNumbers);
                }
                displayNumbers(numbers);
                renderHistory();
            }

            showTodayDate();
            updateNextUpdateText();
            initializeWeeklyNumbers();
        });
    </script>
</body>
</html>
